<script>
    document.addEventListener("DOMContentLoaded", function () {
      
        const currentLang = window.location.pathname.startsWith('/de') ? 'de' : 'en';

        // Theme toggle logic
        const themeToggle = document.getElementById("theme-toggle");
        if (themeToggle) {
            themeToggle.addEventListener("click", function () {
                document.body.classList.toggle("dark");
                if (document.body.classList.contains("dark")) {
                    localStorage.setItem("theme", "dark");
                } else {
                    localStorage.setItem("theme", "light");
                }
            });

            // Apply saved theme from localStorage
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme && savedTheme === "dark") {
                document.body.classList.add("dark");
            }
        }

        // CV download link logic
        const cvLink = document.getElementById("cv-download");

     
        if (cvLink) {
            if (currentLang === 'de') {
                cvLink.href = "{{ '/assets/cv_de.pdf' | relative_url }}";
                cvLink.setAttribute("download", "CV_de.pdf");
            } else {
                cvLink.href = "{{ '/assets/cv.pdf' | relative_url }}";
                cvLink.setAttribute("download", "CV.pdf");
            }
        }

        document.getElementById("language-toggle").addEventListener("click", function (event) {
            event.preventDefault();

            const currentUrl = window.location.href;

            const isGerman = currentUrl.includes("/de/");

            let newUrl = currentUrl;
        
            if (isGerman) {
                newUrl = currentUrl.replace("/de/", "/");
            } else {
                console.log("test12: ", newUrl)
                newUrl = window.location.href + '/de';
            }

            window.location.href = newUrl;
        });

    });
</script>